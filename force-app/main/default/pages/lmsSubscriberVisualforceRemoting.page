<apex:page
    showHeader="false"
    sidebar="false"
    controller="LMSVisualforceController"
    docType="html-5.0"
>
    <apex:stylesheet value="{!URLFOR($Resource.lmsvf, 'lmsvf.css')}" />
    <apex:slds />
    <div class="slds-card">
        <!-- Placeholder for card body. -->
        <div
            data-contact="contact"
            class="slds-card__body slds-card__body_inner"
        />

        <footer class="slds-card__footer">
            <c:viewSource source="pages/{!$CurrentPage.Name}.page">
                Subscribe to a Lightning Message Service channel that another
                Visualforce page, LWC, or Aura component publishes. This LWC
                subscribes to the <strong>Record_Selected__c</strong> event.
                Selecting a contact in one of the contact lists above publishes
                the event. This page interacts with the server using a
                Visualforce remote object.
            </c:viewSource>
        </footer>
    </div>

    <apex:remoteObjects>
        <apex:remoteObjectModel
            name="Contact"
            fields="Id, Name, Title, Phone, Email, Picture__c"
        />
    </apex:remoteObjects>

    <script type="text/javascript">
        // Binding message channel to variable accessible to static resource.
        window.lmsUtil = {
            messageChannel: '{!$MessageChannel.Record_Selected__c}',
            currentPage: '{!$CurrentPage.Name}'
        };
    </script>
    <script src="{!URLFOR($Resource.lmsvf, 'lmsvf.js')}"></script>
</apex:page>
